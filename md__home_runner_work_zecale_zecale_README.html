<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zecale - Reconciling Privacy and Scalability on Smart-Contract Chains: Zecale (/zi:kale/)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zecale - Reconciling Privacy and Scalability on Smart-Contract Chains
   &#160;<span id="projectnumber">0.5</span>
   </div>
   <div id="projectbrief">Reference implementation of the Zecale protocol by Clearmatics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Zecale (/zi:kale/) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A general purpose zk-SNARK aggregator leveraging recursive composition of SNARKs.</p>
<p>This project can be used to:</p><ol type="1">
<li>Scale privacy preserving solutions like <a href="https://github.com/clearmatics/zeth">Zeth</a> by aggregating proofs off-chain (i.e. generate a proof of computational integrity of their validity) and settling a batch of transactions via a single transaction on-chain. This is also referred to as "zk-zk-rollups".</li>
<li>Wrap proofs for a given statement in order to hide the predicate that was evaluated. In other words, by setting the size of the batch to <code>1</code>, a "wrapping" proof is generated to prove the correct verification of another proof on witness the verification key and the public inputs. The wrapping proof can the be settled on-chain. This use is very similar to the "Zero-knowledge EXEcution environment" described in <a href="https://eprint.iacr.org/2018/962.pdf">Zexe</a>.</li>
</ol>
<p>:rotating_light: <b>WARNING</b> This project is a Work In Progress (WIP). It is highly inefficient and has not been thoroughly reviewed. Please do not use in production!</p>
<h1>Building and running the <code>aggregator-server</code>:</h1>
<p>:computer: <b>Warning</b> This project primarily targets x86_64 Linux and macOS platforms.</p>
<h2>Environment</h2>
<p>In order to follow the README below, you will need:</p><ul>
<li><a href="https://www.docker.com/get-started">Docker</a></li>
<li><a href="https://www.python.org/downloads/">Python3</a> (at least version <code>3.7</code>)</li>
</ul>
<p>Additionally, several tools from the GCC and LLVM tools suite are used to improve code quality and generate the documentation of the project. If these are installed they can be executed by passing options to the build:</p><ul>
<li><a href="http://www.doxygen.nl/">Doxygen</a></li>
<li><a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a></li>
<li><a href="https://clang.llvm.org/extra/clang-tidy/">clang-tidy</a></li>
<li><a href="http://cppcheck.sourceforge.net/">cppcheck</a></li>
<li><a href="https://include-what-you-use.org/">include-what-you-use</a></li>
<li><a href="https://llvm.org/docs/CommandGuide/llvm-symbolizer.html">llvm-symbolizer</a></li>
</ul>
<h2>Build and run on host machine</h2>
<h3>Dependencies</h3>
<p>Immediate dependencies are provided as submodules and compiled during the build. The following libraries are also required to build:</p><ul>
<li>grpc</li>
<li>gmp</li>
<li>boost</li>
</ul>
<h3>Build and run</h3>
<div class="fragment"><div class="line"># Clone this repository:</div>
<div class="line">git clone git@github.com:clearmatics/zecale.git</div>
<div class="line">cd zecale</div>
<div class="line"> </div>
<div class="line"># Initialize the submodules</div>
<div class="line">git submodule update --init --recursive</div>
<div class="line"> </div>
<div class="line"># Configure your environment</div>
<div class="line">. ./setup_env.sh</div>
<div class="line"> </div>
<div class="line"># Compile the aggregator</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line"> </div>
<div class="line"># Compile all targets</div>
<div class="line">make</div>
<div class="line"> </div>
<div class="line"># (optional) Build and run the all tests (unit tests, syntax checks, etc)</div>
<div class="line">make check</div>
<div class="line"># Alternatively, run: make build_tests &amp;&amp; make test</div>
<div class="line"> </div>
<div class="line"># Start the aggregator-server process</div>
<div class="line">aggregator-server</div>
</div><!-- fragment --><h2>Build and run in a docker container</h2>
<div class="fragment"><div class="line"># Pull the zeth-base image (this project has the same configuration as Zeth)</div>
<div class="line">docker pull ghcr.io/clearmatics/zeth:latest-base</div>
<div class="line"># To fetch a specific version of the zeth-base image, replace `latest` by</div>
<div class="line"># the desired version number (e.g. `zeth:0.0.2-base`)</div>
<div class="line"> </div>
<div class="line"># Build the Zecale dev image</div>
<div class="line">docker build -f Dockerfile-zecale -t clearmatics/zecale-dev:0.5 .</div>
<div class="line"> </div>
<div class="line"># Start the container</div>
<div class="line">docker run -ti -p 50052:50052 --name zecale clearmatics/zecale-dev:0.5</div>
</div><!-- fragment --><h2>Generate the Doxygen documentation</h2>
<p>To generate the documentation of Zecale: </p><div class="fragment"><div class="line">cd build</div>
<div class="line">cmake .. -DGEN_DOC=ON &amp;&amp; make docs</div>
</div><!-- fragment --><h2>Compile the project using 'sanitizers'</h2>
<p>You can select the sanitizer of your choice (one of the sanitizers listed <a href="./cmake/sanitizers.cmake">here</a>) by passing the flag <code>-DSANITIZER=&lt;sanitizer&gt;</code> to <code>cmake</code>.</p>
<p>Example: </p><div class="fragment"><div class="line">cd build</div>
<div class="line">cmake -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ -DSANITIZER=Address -DCMAKE_BUILD_TYPE=Debug ..</div>
<div class="line">make check</div>
</div><!-- fragment --><h2>Run analysis tools on the code</h2>
<p>Several tools can be ran on the code. These can be enabled via a set of compilation options.</p>
<p>Note: The <code>clang-tidy</code> target runs a clang-tidy python script that should be fetched from <a href="https://github.com/llvm/llvm-project/blob/master/clang-tools-extra/clang-tidy/tool/run-clang-tidy.py">here</a>. To do so, run: <code>cd build &amp;&amp; wget <a href="https://raw.githubusercontent.com/llvm/llvm-project/master/clang-tools-extra/clang-tidy/tool/run-clang-tidy.py">https://raw.githubusercontent.com/llvm/llvm-project/master/clang-tools-extra/clang-tidy/tool/run-clang-tidy.py</a></code></p>
<p>Example: </p><div class="fragment"><div class="line"># run-clang-tidy.py needs to be in the PATH to be found</div>
<div class="line">PATH=$PATH:${PWD}</div>
<div class="line">chmod +x run-clang-tidy.py</div>
<div class="line"> </div>
<div class="line">cmake -DUSE_CLANG_FORMAT=ON -DUSE_CPP_CHECK=ON -DUSE_CLANG_TIDY=ON ..</div>
<div class="line">make cppcheck</div>
<div class="line">make clang-format</div>
<div class="line">make clang-tidy</div>
</div><!-- fragment --><h1>Build and run the client</h1>
<p>See the <a class="el" href="client_2README_8md.html">client README</a> for instructions.</p>
<h1>License notices:</h1>
<h2>Libsnark</h2>
<div class="fragment"><div class="line">The libsnark library is developed by SCIPR Lab (http://scipr-lab.org)</div>
<div class="line">and contributors.</div>
<div class="line"> </div>
<div class="line">Copyright (c) 2012-2014 SCIPR Lab and contributors (see AUTHORS file).</div>
<div class="line"> </div>
<div class="line">All files, with the exceptions below, are released under the MIT License:</div>
<div class="line"> </div>
<div class="line">Permission is hereby granted, free of charge, to any person obtaining a copy</div>
<div class="line">of this software and associated documentation files (the &quot;Software&quot;), to deal</div>
<div class="line">in the Software without restriction, including without limitation the rights</div>
<div class="line">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</div>
<div class="line">copies of the Software, and to permit persons to whom the Software is</div>
<div class="line">furnished to do so, subject to the following conditions:</div>
<div class="line"> </div>
<div class="line">The above copyright notice and this permission notice shall be included in</div>
<div class="line">all copies or substantial portions of the Software.</div>
<div class="line"> </div>
<div class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</div>
<div class="line">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</div>
<div class="line">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</div>
<div class="line">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</div>
<div class="line">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</div>
<div class="line">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</div>
<div class="line">THE SOFTWARE.</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 5 2022 09:17:53 for Zecale - Reconciling Privacy and Scalability on Smart-Contract Chains by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
